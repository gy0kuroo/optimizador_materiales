{% extends 'opticut/base.html' %}
{% block content %}
<div class="container mt-4">
  <h2 class="text-center">Resultado del Plan de Corte</h2>
  <p class="text-center">Aprovechamiento total: {{ optimizacion.aprovechamiento_total|floatformat:2 }}%</p>
  <p class="text-center">Total de tableros generados: <strong>{{ num_tableros }}</strong></p>
  
  <hr>
  
  <!-- Mostrar TODOS los tableros -->
  <div class="row">
    {% for img in imagenes %}
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header text-center bg-primary text-white">
          <h5>Tablero {{ forloop.counter }} de {{ num_tableros }}</h5>
        </div>
        <div class="card-body text-center">
          <img src="data:image/png;base64,{{ img }}" alt="Tablero {{ forloop.counter }}" class="img-fluid">
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  
  <hr>
  
  <!-- UN SOLO BOT√ìN para descargar TODO el PDF -->
  <div class="text-center mt-4">
    <a href="/media/{{ pdf_path }}" class="btn btn-success btn-lg" download>
      üìÑ Descargar PDF Completo ({{ num_tableros }} tableros)
    </a>
  </div>
  
  <hr>
  
  <!-- Bot√≥n para volver -->
  <div class="text-center mt-4 mb-5">
    <a href="{% url 'opticut:index' %}" class="btn btn-secondary btn-lg">
      ‚Üê Volver al Optimizador
    </a>
  </div>
</div>

<style>
  .card {
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
</style>
{% endblock %}